<!DOCTYPE html>
<html>
<head>
    <title>Topilson's Car Game</title>
    <style>
        body {
            background-color: black;
            font-family: Arial, sans-serif;
            color: white;
            text-align: center;
            padding-top: 100px;
            margin: 0;
        }

        canvas {
            display: block;
            margin: 0 auto;
            border: 1px solid white;
        }

        button {
            padding: 10px 20px;
            margin-top: 20px;
            background-color: #3498db;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <h1>Topilson</h1>
    <button id="startButton">Iniciar Jogo</button>
    <canvas id="gameCanvas" width="600" height="400"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const carWidth = 60;
        const carHeight = 80;

        // Variáveis para controlar o carro Topilson
        let topilsonX = canvas.width / 2 - carWidth / 2;
        const topilsonY = canvas.height - carHeight - 20;
        const topilsonSpeed = 5;

        // Variáveis para controlar os carros inimigos
        let enemies = [];
        const enemyWidth = 60;
        const enemyHeight = 80;
        const enemySpeed = 3;

        // Variáveis para controlar o jogo
        let isGameOver = true;
        let score = 0;

        // Função para desenhar o carro
        function drawCar(x, y) {
            ctx.fillStyle = 'blue';
            ctx.fillRect(x, y, carWidth, carHeight);
        }

        // Função para desenhar os carros inimigos
        function drawEnemies() {
            ctx.fillStyle = 'red';
            enemies.forEach(enemy => {
                ctx.fillRect(enemy.x, enemy.y, enemyWidth, enemyHeight);
            });
        }

        // Função para atualizar a posição dos carros inimigos
        function updateEnemies() {
            enemies.forEach(enemy => {
                enemy.y += enemySpeed;
            });

            // Remover carros inimigos que saem do canvas
            enemies = enemies.filter(enemy => enemy.y < canvas.height);
        }

        // Função para verificar colisões entre o carro Topilson e os carros inimigos
        function checkCollisions() {
            enemies.forEach(enemy => {
                if (
                    topilsonX < enemy.x + enemyWidth &&
                    topilsonX + carWidth > enemy.x &&
                    topilsonY < enemy.y + enemyHeight &&
                    topilsonY + carHeight > enemy.y
                ) {
                    isGameOver = true;
                }
            });
        }

        // Função para animar o jogo
        function animate() {
            if (!isGameOver) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawCar(topilsonX, topilsonY);
                drawEnemies();
                updateEnemies();
                checkCollisions();
                score++;
                requestAnimationFrame(animate);
            } else {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = 'white';
                ctx.font = '30px Arial';
                ctx.fillText('Topilson Perdeu', 200, 200);
            }
        }

        // Função para criar um carro inimigo aleatório
        function createEnemy() {
            const randomX = Math.random() * (canvas.width - enemyWidth);
            enemies.push({ x: randomX, y: -enemyHeight });
        }

        // Evento para iniciar o jogo (chamado pelo botão "Iniciar Jogo")
        document.getElementById('startButton').addEventListener('click', () => {
            if (isGameOver) {
                isGameOver = false;
                topilsonX = canvas.width / 2 - carWidth / 2;
                score = 0;
                enemies = [];
                animate();
                // Adicionar carros inimigos a cada 1 segundo
                setInterval(createEnemy, 1000);
            }
        });
    </script>
</body>
</html>
